(this.webpackJsonppariksha=this.webpackJsonppariksha||[]).push([[0],{381:function(e,t,a){},450:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(16),s=a.n(i),o=(a(381),a(59)),c=a(26),l=a(7),d=a(214);const m=e=>fetch("https://pariksha-d9q1.onrender.com/api/login",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>e.json())).catch((e=>console.log(e))),h=(e,t)=>{"undefined"!==typeof window&&(localStorage.setItem("token",e.token),localStorage.setItem("name",e.user.name),localStorage.setItem("email",e.user.email),null!==e.user.profileUrl&&""!==e.user.profileUrl&&localStorage.setItem("profileUrl",e.user.profileUrl),t())},j=()=>"undefined"!=typeof window&&(localStorage.getItem("token")?localStorage.getItem("token"):(localStorage.removeItem("token"),!1));var p=a(2);const b=["component"];var u=e=>{let{component:t}=e,a=Object(d.a)(e,b);const[r,i]=Object(n.useState)(!!localStorage.getItem("token"));return Object(n.useEffect)((()=>{!async function(){console.log("Router Check : "),!1===await j()&&i(!1)}()}),[r]),Object(p.jsx)(c.b,Object(l.a)(Object(l.a)({},a),{},{render:e=>r?Object(p.jsx)(t,Object(l.a)({},e)):Object(p.jsx)(c.a,{to:{pathname:"/",state:{from:e.location}}})}))},g=a(319),O=a(252),x=a(480),f=a(479),y=a(94),v=a(481),w=a(482),S=a(483),C=a(484),k=a(485),T=a(321);const N=e=>{const t=localStorage.getItem("test-token");return fetch("https://pariksha-d9q1.onrender.com/api/test/end-test",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:"Bearer "+t},body:JSON.stringify(e)}).then((e=>e.json())).catch((e=>console.log(e)))};var I=a(476),E=a(320),P=a(3),B=a(69),q=a(475),A=a(473),D=a(478),F=a(354),R=a.n(F),z=a(474),U=a.p+"static/media/blockchainIcon.9bbbef57.png",L=a(202),J=a.n(L),W=a(35);a(318);const H=Object(g.a)((e=>({root:{position:"fixed",bottom:e.spacing(2),right:e.spacing(2)},main:{display:"flex"},card:{maxWidth:345},toolbar:Object(l.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar),content:{flexGrow:1},appBar:{backgroundColor:"#ffffff",zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},appBarSpacer:e.mixins.toolbar,round:{borderRadius:"50%"},icon:{color:"white"},title:{flexGrow:1},drawerClose:{backgroundColor:e.palette.primary.main,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:e.spacing(7)+1,[e.breakpoints.up("sm")]:{width:e.spacing(9)+1}}})));function M(e){const{children:t,window:a}=e,n=H(),r=Object(A.a)({target:a?a():void 0,disableHysteresis:!0,threshold:100});return Object(p.jsx)(z.a,{in:r,children:Object(p.jsx)("div",{onClick:e=>{const t=(e.target.ownerDocument||document).querySelector("#back-to-top-anchor");t&&t.scrollIntoView({behavior:"smooth",block:"center"})},role:"presentation",className:n.root,children:t})})}var G=Object(c.h)((function(e){const t=H();var a,n;if(null!==localStorage.getItem("profileUrl"))n=localStorage.getItem("profileUrl");else{var i=localStorage.getItem("name").split(" ");a=1===i.length?i[0].charAt(0).toUpperCase():i[0].charAt(0).toUpperCase()+i[i.length-1].charAt(0).toUpperCase()}var s=localStorage.getItem("email");const c=!1;return Object(p.jsx)(r.a.Fragment,{children:Object(p.jsxs)("div",{className:t.main,children:[Object(p.jsx)(q.a,{}),Object(p.jsx)(I.a,{position:"fixed",className:Object(P.a)(t.appBar,{[t.appBarShift]:c}),children:Object(p.jsxs)(E.a,{className:t.toolBar,children:[Object(p.jsx)("div",{className:t.title,children:Object(p.jsx)(o.b,{to:"/student/dashboard",children:Object(p.jsx)("img",{src:U,style:{width:"3rem",height:"3rem"},alt:"banner"})})}),Object(p.jsx)("ul",{className:"navbar-nav me-2 mb-2 mb-lg-0",children:Object(p.jsxs)("li",{className:"nav-item dropdown",children:[void 0===n?Object(p.jsx)("div",{className:"nav-link  bg-primary text-light rounded-circle text-center",style:{width:"2.5rem",height:"2.5rem",fontSize:"1.2rem"},id:"navbarDropdown",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false",children:Object(p.jsx)("p",{children:a})}):Object(p.jsx)("img",{alt:"profilePhoto",src:n,className:"text-light rounded-circle",style:{width:"2.5rem",height:"2.5rem"},id:"navbarDropdown",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}),Object(p.jsxs)("ul",{className:"dropdown-menu","aria-labelledby":"navbarDropdown",children:[Object(p.jsx)("li",{children:Object(p.jsx)("span",{className:"dropdown-item",children:s})}),Object(p.jsx)("li",{children:Object(p.jsx)("span",{className:"dropdown-item",children:"Software Engineer 1"})}),Object(p.jsx)("li",{children:Object(p.jsx)("hr",{className:"dropdown-divider"})}),Object(p.jsx)("li",{children:Object(p.jsx)("span",{className:"dropdown-item",children:Object(p.jsxs)("button",{className:"dropdown-item",onClick:()=>{W.c.success("Logout Successfully!"),setTimeout(5e3),localStorage.removeItem("token"),localStorage.removeItem("name"),localStorage.removeItem("email"),e.history.push("/")},children:[" ",Object(p.jsx)(J.a,{})," Logout "]})})})]})]})})]})}),Object(p.jsx)(B.a,{variant:"permanent",className:Object(P.a)(t.drawer,{[t.drawerOpen]:c,[t.drawerClose]:!0}),classes:{paper:Object(P.a)({[t.drawerOpen]:c,[t.drawerClose]:!0})},children:Object(p.jsx)("div",{className:"navRoot",children:Object(p.jsxs)("span",{className:"hashedinLogo",children:[Object(p.jsxs)("span",{className:"hashedinTitle",children:["Hashed",Object(p.jsx)("span",{className:"hashedinText",children:"In"})]}),Object(p.jsx)("span",{className:"deloitteTitle",children:" By Deloitte "})]})})}),Object(p.jsxs)("main",{className:t.content,children:[Object(p.jsx)("div",{className:t.appBarSpacer}),Object(p.jsx)(O.a,{children:e.children})]}),Object(p.jsx)(E.a,{id:"back-to-top-anchor",disableGutters:!0}),Object(p.jsx)(M,Object(l.a)(Object(l.a)({},e),{},{children:Object(p.jsx)(D.a,{color:"secondary",size:"small","aria-label":"scroll back to top",children:Object(p.jsx)(R.a,{})})}))]})})}));const _=Object(g.a)((e=>({card:{maxWidth:345,minWidth:345}})));function V(e){const t=_(),[a,i]=Object(n.useState)([]);Object(n.useEffect)((()=>{(async()=>{const e=await j();return!1!==e&&fetch("https://pariksha-d9q1.onrender.com/api/student/tests",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",authorization:"Bearer "+e}}).then((e=>e.json())).catch((e=>e))})().then((async e=>{!1!==e.success?i(e.results):(localStorage.removeItem("token"),window.location.reload())}))}),[e.history]);const s=t=>{var n=a.find((e=>e._id===t));localStorage.setItem("test",JSON.stringify(n)),e.history.push("/student/test/"+t)};return Object(p.jsxs)(r.a.Fragment,{children:[localStorage.getItem("test-token")?Object(p.jsx)(c.a,{to:"/student/questions"}):j()?void 0:(console.log("Instruction Token"+j()),localStorage.removeItem("token"),Object(p.jsx)(c.a,{to:"/"})),Object(p.jsxs)(G,{children:[Object(p.jsx)(f.a,{direction:"column",children:a.filter((e=>new Date(e.endTime).getTime()>(new Date).getTime())).length>0?Object(p.jsxs)(x.a,{children:[Object(p.jsx)(y.a,{style:{paddingTop:"1rem"},variant:"h5",gutterBottom:!0,component:"div",children:"Ongoing Tests"}),Object(p.jsx)(O.a,{my:2,children:Object(p.jsx)(f.a,{container:!0,direction:"row",justify:"right",alignItems:"center",spacing:4,children:a.filter((e=>new Date(e.endTime).getTime()>(new Date).getTime())).map((e=>Object(p.jsx)(f.a,{item:!0,children:Object(p.jsxs)(v.a,{className:t.card,children:[Object(p.jsxs)(w.a,{children:[Object(p.jsx)(S.a,{component:"img",alt:"Contemplative Reptile",height:"140",image:e.testUrl?e.testUrl:"https://png.pngtree.com/background/20210710/original/pngtree-recruitment-background-banner-picture-image_1037995.jpg",title:"Contemplative Reptile"}),Object(p.jsxs)(C.a,{children:[Object(p.jsx)(y.a,{gutterbottom:!0,variant:"h5",component:"h2",children:e.title.toUpperCase()}),e.description?Object(p.jsx)(y.a,{variant:"body2",color:"textSecondary",component:"p",children:e.description.toUpperCase()}):Object(p.jsx)(p.Fragment,{}),Object(p.jsxs)(y.a,{variant:"body2",color:"textSecondary",component:"p",children:["Start Time : ",new Date(e.startTime).toLocaleString(navigator.language||navigator.languages[0],{day:"numeric",year:"numeric",month:"long",hour:"numeric",minute:"numeric",second:"numeric"})]}),Object(p.jsxs)(y.a,{variant:"body2",color:"textSecondary",component:"p",children:["Duration : ",e.duration.hour+"h "+e.duration.minute+"m"]})]})]}),Object(p.jsx)(k.a,{children:new Date(e.endTime).getTime()>(new Date).getTime()?Object(p.jsx)(T.a,{size:"small",style:{color:"blue"},onClick:()=>s(e._id),children:"Start"}):Object(p.jsx)(T.a,{size:"small",color:"muted",children:"Ended"})})]})},e._id)))})})]}):Object(p.jsx)(p.Fragment,{})}),Object(p.jsx)(f.a,{direction:"column",children:a.filter((e=>new Date(e.endTime).getTime()<=(new Date).getTime())).length>0?Object(p.jsxs)(x.a,{children:[Object(p.jsx)(y.a,{style:{paddingTop:"1rem"},variant:"h5",gutterBottom:!0,component:"div",children:"Expired Tests"}),Object(p.jsx)(O.a,{my:2,children:Object(p.jsx)(f.a,{container:!0,direction:"row",justify:"right",alignItems:"center",spacing:4,children:a.filter((e=>new Date(e.endTime).getTime()<=(new Date).getTime())).map((e=>Object(p.jsx)(f.a,{item:!0,children:Object(p.jsxs)(v.a,{className:t.card,children:[Object(p.jsxs)(w.a,{children:[Object(p.jsx)(S.a,{component:"img",alt:"Contemplative Reptile",height:"140",image:e.testUrl?e.testUrl:"http://validata-software.com/images/blog/wp-content/uploads/2017/02/service-automation_banner.png",title:"Contemplative Reptile"}),Object(p.jsxs)(C.a,{children:[Object(p.jsx)(y.a,{gutterbottom:!0,variant:"h5",component:"h2",children:e.title.toUpperCase()}),e.description?Object(p.jsx)(y.a,{variant:"body2",color:"textSecondary",component:"p",children:e.description.toUpperCase()}):Object(p.jsx)(p.Fragment,{}),Object(p.jsxs)(y.a,{variant:"body2",color:"textSecondary",component:"p",children:["Start Time : ",new Date(e.startTime).toLocaleString(navigator.language||navigator.languages[0],{day:"numeric",year:"numeric",month:"long",hour:"numeric",minute:"numeric",second:"numeric"})]}),Object(p.jsxs)(y.a,{variant:"body2",color:"textSecondary",component:"p",children:["Duration : ",e.duration.hour+"h "+e.duration.minute+"m"]})]})]}),Object(p.jsx)(k.a,{children:new Date(e.endTime).getTime()>(new Date).getTime()?Object(p.jsx)(T.a,{size:"small",style:{color:"blue"},onClick:()=>s(e._id),children:"Start"}):Object(p.jsx)(T.a,{size:"small",color:"muted",children:"Ended"})})]})},e._id)))})})]}):Object(p.jsx)(p.Fragment,{})})]})]})}var Q=a.p+"static/media/brllogo.9bbbef57.png",Y=a.p+"static/media/Mask Group 4.551d728b.png",K=a.p+"static/media/Mask Group 5.a81ed2d2.png",X=a.p+"static/media/Group 72.d9879024.svg",$=a(502),Z=a(322),ee=a(355),te=a.n(ee);var ae=Object(c.h)((function(e){const[t,a]=Object(n.useState)({email:"amosaini@deloitte.com",password:"123456789",error:"",loading:!1}),{email:r,password:i,error:s,loading:o}=t,[c,d]=Object(n.useState)(!1),b=()=>d(!1),u=e=>n=>{document.getElementById("LoginUser").classList.remove("is-invalid"),document.getElementById("LoginPass").classList.remove("is-invalid"),a(Object(l.a)(Object(l.a)({},t),{},{error:!1,[e]:n.target.value}))};Object(n.useEffect)((()=>{!async function(){await j()&&e.history.push("/student/dashboard")}()}),[e.history]);const g=n=>{n.preventDefault(),""===i||""===r?(a(Object(l.a)(Object(l.a)({},t),{},{error:!1,loading:!1})),""===i&&document.getElementById("LoginPass").classList.add("is-invalid"),""===r&&document.getElementById("LoginUser").classList.add("is-invalid")):(a(Object(l.a)(Object(l.a)({},t),{},{error:!1,loading:!0})),m({email:r,password:i}).then((n=>{n.error?(a(Object(l.a)(Object(l.a)({},t),{},{error:n.error,loading:!1})),d(!0)):h(n,(()=>{W.c.success("Login Successfully!"),e.history.push("/student/dashboard")}))})).catch((e=>e)))},O=async t=>{try{const a=await fetch("https://pariksha-d9q1.onrender.com/api/api/v1/auth/google",{method:"POST",body:JSON.stringify({token:t.tokenId}),headers:{"Content-Type":"application/json"}}),n=await a.json();h(n,(()=>{W.c.success("Login Successfully!"),e.history.push("/student/dashboard")}))}catch(s){W.c.error("Error has occured!")}};return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)($.a,{show:c,onHide:b,centered:!0,children:[Object(p.jsx)($.a.Header,{closeButton:!0,children:Object(p.jsx)($.a.Title,{children:"Enter Details Carefully"})}),Object(p.jsx)($.a.Body,{children:s}),Object(p.jsx)($.a.Footer,{children:Object(p.jsx)(T.a,{variant:"secondary",onClick:b,children:"Close"})})]})}),Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{children:[Object(p.jsx)("img",{src:Q,alt:"logo",className:"img-fluid pl-4 pt-4 logo float-left"}),Object(p.jsx)("img",{src:X,alt:"banner",className:"img-fluid pl-4 banner float-right"}),Object(p.jsxs)("div",{className:"box",children:[Object(p.jsxs)("p",{className:"text mb-4",children:[" ","HU- PARIKSHA",Object(p.jsx)("br",{})," Test Portal"," "]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("input",{type:"email",id:"LoginUser",className:"form-control",onChange:u("email"),value:r,placeholder:"Enter Email"}),Object(p.jsx)("div",{className:"invalid-feedback text-left",id:"UserError",children:"Please Enter the Email!"})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("input",{type:"password",id:"LoginPass",onChange:u("password"),value:i,className:"form-control",placeholder:"Password"}),Object(p.jsx)("div",{className:"invalid-feedback text-left",id:"PassError",children:"Please Enter the Password!"})]}),Object(p.jsx)(T.a,{type:"submit",variant:"contained",onClick:g,children:o?Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(Z.a,{color:"light",style:{height:"1.5rem",width:"1.5rem",marginBottom:"-3px"}})}):"Login"}),Object(p.jsx)("span",{style:{margin:"1rem"},children:"OR"}),Object(p.jsx)(te.a,{clientId:"1023921844771-a5ahesr26dq7gno7otrulauuo4j6hqvo.apps.googleusercontent.com",buttonText:"Log in with Google",onSuccess:O,onFailure:O,cookiePolicy:"single_host_origin",theme:"dark"})]})]}),Object(p.jsxs)("footer",{children:[Object(p.jsx)("img",{src:Y,alt:"footer-img1",className:"img-fluid mg-4"}),Object(p.jsx)("img",{src:K,alt:"footer-img2",className:"img-fluid float-right mg-5"})]})]})]})})),ne=a(205),re=a.n(ne),ie=a(212);var se=new class{constructor(){this.socket=null,this.isConnected=!1,this.mediaRecorder=null,this.stream=null,this.recordingInterval=null}connect(e){return this.socket&&this.isConnected?Promise.resolve():new Promise(((t,a)=>{this.socket=Object(ie.a)("https://pariksha-d9q1.onrender.com/api",{transports:["websocket"],auth:{token:e}}),this.socket.on("connect",(()=>{console.log("WebSocket connected"),this.isConnected=!0,t()})),this.socket.on("connect_error",(e=>{console.error("WebSocket connection error:",e),this.isConnected=!1,a(e)})),this.socket.on("disconnect",(()=>{console.log("WebSocket disconnected"),this.isConnected=!1,this.stopVideoStreaming()}))}))}disconnect(){this.socket&&(this.stopVideoStreaming(),this.socket.disconnect(),this.socket=null,this.isConnected=!1)}async startVideoStreaming(){if(!this.isConnected)throw new Error("WebSocket not connected");try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Camera access not supported in this browser");if("https:"!==window.location.protocol&&"localhost"!==window.location.hostname&&"127.0.0.1"!==window.location.hostname)throw new Error("Camera access requires HTTPS or localhost");return this.stream=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640},height:{ideal:480},frameRate:{ideal:15,max:30}},audio:!1}),this.mediaRecorder=new MediaRecorder(this.stream,{mimeType:"video/webm;codecs=vp8",videoBitsPerSecond:25e4}),this.mediaRecorder.ondataavailable=e=>{e.data.size>0&&this.isConnected&&this.socket.emit("videoStream",{chunk:e.data})},this.mediaRecorder.start(1e3),this.socket.emit("videoStream",{type:"info",width:640,height:480,frameRate:15}),console.log("Video streaming started"),this.stream}catch(e){if(console.error("Error starting video stream:",e),"NotAllowedError"===e.name)throw new Error("Camera access denied. Please allow camera permissions and refresh the page.");if("NotFoundError"===e.name)throw new Error("No camera found. Please connect a camera and try again.");if("NotReadableError"===e.name)throw new Error("Camera is already in use by another application.");if("OverconstrainedError"===e.name)throw new Error("Camera constraints cannot be satisfied. Please try a different camera.");if("SecurityError"===e.name)throw new Error("Camera access blocked due to security restrictions. Please use HTTPS or localhost.");throw e}}stopVideoStreaming(){this.mediaRecorder&&"inactive"!==this.mediaRecorder.state&&this.mediaRecorder.stop(),this.stream&&(this.stream.getTracks().forEach((e=>e.stop())),this.stream=null),this.recordingInterval&&(clearInterval(this.recordingInterval),this.recordingInterval=null),console.log("Video streaming stopped")}sendStreamUpdate(e){this.isConnected&&this.socket.emit("streamUpdate",e)}getVideoStream(){return this.stream}isStreaming(){return this.mediaRecorder&&"recording"===this.mediaRecorder.state}},oe=a(110);var ce=e=>{let{onCameraReady:t,onError:a}=e;const[r,i]=Object(n.useState)(!1),[s,o]=Object(n.useState)(null),[c,l]=Object(n.useState)(!0);Object(n.useEffect)((()=>{navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||(l(!1),o("Camera access not supported in this browser"))}),[]);return c?Object(p.jsxs)(O.a,{p:2,children:[Object(p.jsx)(y.a,{variant:"h6",gutterBottom:!0,children:"Camera Test"}),s&&Object(p.jsx)(oe.a,{elevation:2,style:{padding:16,backgroundColor:"#ffebee",border:"1px solid #f44336",marginBottom:16},children:Object(p.jsx)(y.a,{style:{color:"#d32f2f"},children:s})}),Object(p.jsx)(y.a,{variant:"body2",color:"textSecondary",paragraph:!0,children:"Click the button below to test your camera access. This will help identify any issues before starting the test."}),Object(p.jsx)(T.a,{variant:"contained",color:"primary",onClick:async()=>{i(!0),o(null);try{if("https:"!==window.location.protocol&&"localhost"!==window.location.hostname&&"127.0.0.1"!==window.location.hostname)throw new Error("Camera access requires HTTPS or localhost");(await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640},height:{ideal:480},frameRate:{ideal:15,max:30}},audio:!1})).getTracks().forEach((e=>e.stop())),t&&t()}catch(s){console.error("Camera test error:",s);let t="Camera test failed";"NotAllowedError"===s.name?t="Camera access denied. Please allow camera permissions and try again.":"NotFoundError"===s.name?t="No camera found. Please connect a camera and try again.":"NotReadableError"===s.name?t="Camera is already in use by another application.":"OverconstrainedError"===s.name?t="Camera constraints cannot be satisfied.":"SecurityError"===s.name?t="Camera access blocked due to security restrictions. Please use HTTPS or localhost.":s.message.includes("HTTPS or localhost")&&(t="Camera access requires HTTPS or localhost. Please use a secure connection."),o(t),a&&a(t)}finally{i(!1)}},disabled:r,fullWidth:!0,children:r?"Testing Camera...":"Test Camera Access"}),Object(p.jsxs)(y.a,{variant:"caption",display:"block",style:{marginTop:8},children:[Object(p.jsx)("strong",{children:"Tips:"}),Object(p.jsx)("br",{}),"\u2022 Make sure your camera is connected and not being used by other applications",Object(p.jsx)("br",{}),"\u2022 Allow camera permissions when prompted by your browser",Object(p.jsx)("br",{}),"\u2022 Use HTTPS or localhost for camera access",Object(p.jsx)("br",{}),"\u2022 Try refreshing the page if the test fails"]})]}):Object(p.jsxs)(oe.a,{elevation:2,style:{padding:16,backgroundColor:"#ffebee",border:"1px solid #f44336"},children:[Object(p.jsx)(y.a,{variant:"h6",style:{color:"#d32f2f",marginBottom:8},children:"Camera Not Supported"}),Object(p.jsx)(y.a,{style:{color:"#d32f2f"},children:"Your browser doesn't support camera access. Please use a modern browser like Chrome, Firefox, or Safari."})]})},le=a(258),de=a(259),me=a(262),he=a(323);const je=Object(g.a)((e=>({pl:{padding:e.spacing(5)},pr:{padding:e.spacing(2)},formControl:{margin:e.spacing(1),minWidth:200}})));var pe=Object(c.h)((()=>{const[e,t]=Object(n.useState)({hour:JSON.parse(localStorage.getItem("test")).duration.hour?JSON.parse(localStorage.getItem("test")).duration.hour:0,minute:JSON.parse(localStorage.getItem("test")).duration.minute?JSON.parse(localStorage.getItem("test")).duration.minute:0,second:JSON.parse(localStorage.getItem("test")).duration.second?JSON.parse(localStorage.getItem("test")).duration.second:0,optional:JSON.parse(localStorage.getItem("test")).optionalCategory.length>0?JSON.parse(localStorage.getItem("test")).optionalCategory:[],mandatory:JSON.parse(localStorage.getItem("test")).mandatoryCategory?JSON.parse(localStorage.getItem("test")).mandatoryCategory:[],startTime:new Date(JSON.parse(localStorage.getItem("test")).startTime).toLocaleString(navigator.language||navigator.languages[0],{day:"numeric",year:"numeric",month:"short",hour:"numeric",minute:"numeric"}),didRedirect:!1,loading:!1,isCameraOne:!1,error:"",lang:JSON.parse(localStorage.getItem("test")).optionalCategory.length>0?JSON.parse(localStorage.getItem("test")).optionalCategory[0]:null,showCameraTest:!1}),{hour:a,minute:r,second:i,isCameraOne:s,didRedirect:o,loading:d,optional:m,mandatory:h,startTime:b,error:u,lang:g,showCameraTest:y}=e,v=j(),{id:w}=Object(c.g)(),S=async a=>{!1===s?(t(Object(l.a)(Object(l.a)({},e),{},{error:"Please Turn On Camera!",showCameraTest:!0})),document.getElementById("errorText").classList.add("d-block")):(t(Object(l.a)(Object(l.a)({},e),{},{error:!1,loading:!0})),(async e=>{const t=await j();return fetch("https://pariksha-d9q1.onrender.com/api/student/test-token/"+e,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",authorization:"Bearer "+t}}).then((e=>e.json())).catch((e=>e))})(w).then((a=>{a.token?(localStorage.setItem("test-token",a.token),(async e=>{const t=localStorage.getItem("test-token");let a;return a=e?"https://pariksha-d9q1.onrender.com/api/test/get-questions?category="+e:"https://pariksha-d9q1.onrender.com/api/test/get-questions",fetch(a,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",authorization:"Bearer "+t}}).then((e=>e.json())).catch((e=>e))})(g).then((a=>{a.res_questions?(localStorage.setItem("questions",JSON.stringify(a.res_questions)),localStorage.setItem("time",JSON.stringify(a.time)),localStorage.setItem("save",JSON.stringify([])),localStorage.setItem("mark",JSON.stringify([])),t((e=>Object(l.a)(Object(l.a)({},e),{},{loading:!1,didRedirect:!0})))):(t(Object(l.a)(Object(l.a)({},e),{},{error:a.error})),document.getElementById("errorText").classList.add("d-block"))})).catch((e=>console.log(e)))):(t(Object(l.a)(Object(l.a)({},e),{},{error:a.error})),document.getElementById("errorText").classList.add("d-block")),console.log(a)})).catch((e=>console.log(e))))},C=e=>{var a=e.target.value;t((e=>Object(l.a)(Object(l.a)({},e),{},{lang:a})))},k=Object(n.useCallback)((async()=>{try{const e=await j();if(!e)return void t((e=>Object(l.a)(Object(l.a)({},e),{},{error:"Authentication required"})));await se.connect(e);const a=await se.startVideoStreaming();t((e=>Object(l.a)(Object(l.a)({},e),{},{isCameraOne:!0}))),document.getElementById("cam")&&(document.getElementById("cam").srcObject=a),se.sendStreamUpdate({testId:w,status:"preparing",stage:"instructions"})}catch(u){console.error("Webcam initialization error:",u);let a="Camera access denied or not available";u.message.includes("Camera access denied")?a="Camera access denied. Please allow camera permissions and refresh the page.":u.message.includes("No camera found")?a="No camera found. Please connect a camera and try again.":u.message.includes("Camera is already in use")?a="Camera is already in use by another application. Please close other applications using the camera.":u.message.includes("HTTPS or localhost")?a="Camera access requires HTTPS or localhost. Please use a secure connection.":u.message.includes("not supported")?a="Camera access not supported in this browser. Please use a modern browser.":u.message.includes("WebSocket not connected")&&(a="Cannot connect to server. Please check your internet connection and try again."),t((e=>Object(l.a)(Object(l.a)({},e),{},{error:a,isCameraOne:!1})))}}),[w]);Object(n.useEffect)((()=>(k(),function(){se.stopVideoStreaming(),se.disconnect(),localStorage.removeItem("optional"),localStorage.removeItem("mandatoryCategory")})),[w,k]);const N=je();return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{children:Object(p.jsx)(G,{children:Object(p.jsx)(x.a,{children:Object(p.jsx)(O.a,{my:4,children:Object(p.jsxs)(f.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:6,margin:2,children:[Object(p.jsx)(f.a,{item:!0,children:Object(p.jsxs)(oe.a,{className:N.pl,children:[Object(p.jsx)("h1",{children:"Instruction"}),Object(p.jsxs)("ul",{children:[Object(p.jsx)("li",{children:"Have a stable internet connection."}),Object(p.jsx)("li",{children:"This is a Web Proctored Exam. Kindly allow camera Permission"}),Object(p.jsx)("li",{children:'Do Not "Refresh" Or "Close" this tab or else you will be logged out.'}),Object(p.jsxs)("li",{children:["The test button will be active at ",b," after which you will lose time for the test."]}),Object(p.jsxs)("li",{children:["There would be questions for each",Object(p.jsxs)("ul",{children:[h.map((e=>Object(p.jsx)("li",{children:e.toUpperCase()}))),m.length>0?Object(p.jsxs)("li",{children:[" Any One : ",m.map((e=>Object(p.jsxs)("span",{children:[e.toUpperCase()," \xa0"]})))]}):Object(p.jsx)(p.Fragment,{})]})]}),Object(p.jsx)("li",{children:"Test will be auto submit after the time expires."}),Object(p.jsx)("li",{children:"Switching tabs is strictly prohibited and would be considered in the final evaluation."}),Object(p.jsx)("li",{children:"Answers once submitted cannot be unmarked but can be modified."}),Object(p.jsx)("li",{children:"Marked answers will not be Submitted at the End of test."}),Object(p.jsx)("li",{children:Object(p.jsx)("b",{children:"You will be awarded 1 mark for Correct Answer and there is no negative marking."})})]})]})}),Object(p.jsx)(f.a,{item:!0,children:Object(p.jsxs)(oe.a,{className:N.pr,children:[Object(p.jsx)("div",{className:"row h-20",children:Object(p.jsx)("div",{className:"col-md-12 my-3 text-center display-3",children:Object(p.jsxs)("span",{id:"clock",children:[a,":",r<10?"0".concat(r):r,":",i<10?"0".concat(i):i]})})}),Object(p.jsx)("div",{className:"row",children:Object(p.jsx)("div",{className:"col-12",children:Object(p.jsx)(re.a,{id:"cam",style:{width:"100%",maxWidth:"320px",height:"240px",margin:"0 auto",display:"block"}})})}),Object(p.jsx)("div",{className:"row",children:Object(p.jsx)("div",{className:"col-md-12",style:{textAlign:"-webkit-center"},children:Object(p.jsxs)(le.a,{className:N.formControl,children:[0!==m.length?Object(p.jsx)(de.a,{id:"demo-simple-select-outlined-label",children:"Language"}):Object(p.jsx)(p.Fragment,{}),0!==m.length?Object(p.jsx)(me.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:g,onChange:C,label:"land",children:m.map((e=>Object(p.jsx)(he.a,{value:e,children:e.toUpperCase()})))}):Object(p.jsx)(p.Fragment,{})]})})}),Object(p.jsx)("div",{className:"row",children:Object(p.jsx)("div",{className:"col-md-12 mb-2 text-center",children:Object(p.jsx)(T.a,{variant:"contained",color:"primary",onClick:S,children:d?Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(Z.a,{color:"light",style:{height:"1rem",width:"1rem",marginBottom:"-2px"}})}):"Start Test"})})}),Object(p.jsx)("div",{className:"row",children:Object(p.jsx)("div",{className:"col-md-12",style:{textAlign:"-webkit-center"},children:Object(p.jsx)("div",{className:"invalid-feedback text-center",id:"errorText",children:u})})}),y&&Object(p.jsx)("div",{className:"row",style:{marginTop:"20px"},children:Object(p.jsx)("div",{className:"col-md-12",children:Object(p.jsx)(ce,{onCameraReady:()=>{t((e=>Object(l.a)(Object(l.a)({},e),{},{showCameraTest:!1,error:""}))),document.getElementById("errorText").classList.remove("d-block"),k()},onError:e=>{t((t=>Object(l.a)(Object(l.a)({},t),{},{error:e})))}})})})]})})]})})})})}),!0===o&&!1===d&&v||localStorage.getItem("test-token")?Object(p.jsx)(c.a,{to:"/student/questions"}):j()&&"Token is not valid"!==u?void 0:(console.log("Instruction Token"+j()),localStorage.removeItem("token"),Object(p.jsx)(c.a,{to:"/"}))]})})),be=a(71),ue=a.n(be);var ge=function(){const e=r.a.createRef();return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(ue.a,{title:"Questions",columns:[{title:"Category",field:"category"},{title:"Question",field:"question"},{title:"Option 1",field:"one"},{title:"Option 2",field:"two"},{title:"Option 3",field:"three"},{title:"Option 4",field:"four"},{title:"correct",field:"correct"}],data:e=>new Promise(((t,a)=>{((e,t)=>{const a=j();return fetch("https://pariksha-d9q1.onrender.com/api/admin/questions?page="+e+"&limit="+t,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",authorization:"Bearer "+a}}).then((e=>e.json())).catch((e=>e))})(e.page+1,e.pageSize).then((e=>{t({data:e.results,page:e.page-1,totalCount:e.total})}))})),actions:[{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:()=>e.current&&e.current.onQueryChange()}],editable:{onRowUpdate:(e,t)=>new Promise(((a,n)=>{setTimeout((()=>{((e,t)=>{const a=j();fetch("https://pariksha-d9q1.onrender.com/api"+"/admin/question/".concat(e),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",authorization:"Bearer "+a},body:JSON.stringify(t)}).then((e=>e.json())).catch((e=>e))})(t._id,e),a()}),1e3)})),onRowDelete:e=>new Promise(((t,a)=>{setTimeout((()=>{(e=>{const t=j();fetch("https://pariksha-d9q1.onrender.com/api"+"/admin/question/".concat(e),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",authorization:"Bearer "+t}}).then((e=>e.json())).catch((e=>e))})(e._id),t()}),1e3)}))},options:{grouping:!0,actionsColumnIndex:-1,pageSizeOptions:[5,10,20,50,100,500],exportButton:!0}})})},Oe=a(333);const xe=Object(g.a)((e=>({formControl:{margin:e.spacing(2,0),width:"100%"},root:{display:"flex",flexWrap:"wrap","& > *":{margin:e.spacing(1,3)}},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},noLabel:{marginTop:e.spacing(3)}})));function fe(){const e=xe(),[t,a]=r.a.useState({selectedFile:"",selectedImageFile:"",question:"",one:"",two:"",three:"",four:"",correct:"",category:"",filename:"Choose a file"}),n=e=>{a(Object(l.a)(Object(l.a)({},t),{},{[e.target.name]:e.target.value}))},{question:i,one:s,two:o,three:c,four:d,correct:m,category:h,selectedFile:b,selectedImageFile:u,filename:g}=t;return Object(p.jsxs)(f.a,{container:!0,spacing:2,direction:"row",justifyContent:"center",alignItems:"center",children:[Object(p.jsx)(f.a,{item:!0,lg:4,sm:12,children:Object(p.jsxs)(oe.a,{style:{padding:"2rem"},children:[Object(p.jsx)(y.a,{variant:"h5",align:"center",style:{margin:".5rem"},children:" Have a CSV ?"}),Object(p.jsxs)("form",{children:[Object(p.jsxs)("label",{htmlFor:"contained-button-file",style:{margin:".5rem 0"},children:[Object(p.jsx)("input",{accept:".csv",id:"contained-button-file",type:"file",style:{display:"none"},onChange:e=>{a(Object(l.a)(Object(l.a)({},t),{},{selectedFile:e.target.files[0],filename:document.getElementById("contained-button-file").value.replace("fakepath","...")}))}}),Object(p.jsx)(T.a,{variant:"contained",component:"span",style:{marginRight:"1rem"},children:"Upload"}),g]}),Object(p.jsx)(le.a,{className:e.formControl,children:Object(p.jsx)(T.a,{variant:"contained",color:"primary",align:"center",type:"submit",onClick:e=>{e.preventDefault();let t=new FormData;t.append("file",b),(e=>{const t=j();return fetch("https://pariksha-d9q1.onrender.com/api/admin/upload-questions",{method:"POST",headers:{Accept:"application/json",authorization:"Bearer "+t},body:e}).then((e=>e.json())).catch((e=>e))})(t).then((e=>{if(!0!==e.success)throw new Error(void 0!==e.errors?e.errors[0].msg:e.msg);W.c.success("Questions Uploaded Successfully!!"),a({question:"",one:"",two:"",three:"",four:"",correct:"",category:""})})).catch((e=>W.c.error(e.message)))},style:{marginBottom:".5rem"},children:" Upload "})}),Object(p.jsx)("span",{})]})]})}),Object(p.jsx)(f.a,{item:!0,lg:8,sm:12,children:Object(p.jsxs)(oe.a,{children:[Object(p.jsx)(y.a,{variant:"h5",align:"center",style:{paddingTop:"1rem"},children:" Create Question"}),Object(p.jsxs)("form",{className:e.root,noValidate:!0,autoComplete:"off",children:[Object(p.jsx)(Oe.a,{id:"outlined-full-width",label:"Question",placeholder:"Question",style:{flexGrow:1},value:i,name:"question",onChange:n,margin:"normal"}),Object(p.jsxs)("label",{htmlFor:"button-file",style:{margin:".5rem 0",alignSelf:"end"},children:[Object(p.jsx)("input",{id:"button-file",type:"file",style:{display:"none"},onChange:e=>{a(Object(l.a)(Object(l.a)({},t),{},{selectedImageFile:e.target.files[0]}))}}),Object(p.jsx)(T.a,{variant:"contained",component:"span",style:{marginRight:"1rem"},children:""===u?"Image":"Selected"})]}),Object(p.jsx)(Oe.a,{id:"outlined-full-width",label:"Option 1",placeholder:"Option 1",fullWidth:!0,value:s,name:"one",onChange:n,margin:"normal"}),"   ",Object(p.jsx)(Oe.a,{id:"outlined-full-width",label:"Option 2",placeholder:"Option 2",fullWidth:!0,value:o,name:"two",onChange:n,margin:"normal"}),Object(p.jsx)(Oe.a,{id:"outlined-full-width",label:"Option 3",placeholder:"Option 3",fullWidth:!0,value:c,name:"three",onChange:n,margin:"normal"}),Object(p.jsx)(Oe.a,{id:"outlined-full-width",label:"Option 4",placeholder:"Option 4",fullWidth:!0,value:d,name:"four",onChange:n,margin:"normal"}),Object(p.jsxs)(le.a,{fullWidth:!0,children:[Object(p.jsx)(de.a,{id:"demo-simple-select-label",children:"Correct Answer"}),Object(p.jsxs)(me.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:m,label:"Correct",onChange:n,name:"correct",children:[Object(p.jsx)(he.a,{value:"one",children:"1"}),Object(p.jsx)(he.a,{value:"two",children:"2"}),Object(p.jsx)(he.a,{value:"three",children:"3"}),Object(p.jsx)(he.a,{value:"four",children:"4"})]})]}),Object(p.jsx)(Oe.a,{id:"outlined-full-width",label:"Category",placeholder:"Category",fullWidth:!0,value:h,name:"category",onChange:n,margin:"normal"}),Object(p.jsx)(le.a,{className:e.formControl,gutterbottom:"true",children:Object(p.jsx)(T.a,{variant:"contained",color:"primary",align:"center",onClick:()=>{let e=new FormData;""!==u&&e.append("image",u),e.append("question",i),e.append("one",s),e.append("two",o),e.append("three",c),e.append("four",d),e.append("correct",m),e.append("category",h),(e=>{const t=j();return fetch("https://pariksha-d9q1.onrender.com/api/admin/add-question",{method:"POST",headers:{Accept:"application/json",authorization:"Bearer "+t},body:e}).then((e=>e.json())).catch((e=>e))})(e).then((e=>{if(!0!==e.success)throw new Error(void 0!==e.errors?e.errors[0].msg:e.msg);W.c.success("Question Saved Successfully!!"),a({question:"",selectedImageFile:"",one:"",two:"",three:"",four:"",correct:"",category:""})})).catch((e=>W.c.error(e.message)))},style:{margin:"1rem 0"},children:" Submit "})})]})]})})]})}var ye=function(){return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(ue.a,{title:"Feedback",columns:[{title:"Name",field:"name"},{title:"Email",field:"email"},{title:"Quality",field:"quality"},{title:"Feedback",field:"feedback"}],data:e=>new Promise(((t,a)=>{((e,t)=>{const a=j();return fetch("https://pariksha-d9q1.onrender.com/api/admin/feedbacks?page="+e+"&limit="+t,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",authorization:"Bearer "+a}}).then((e=>e.json())).catch((e=>e))})(e.page+1,e.pageSize).then((e=>{t({data:e.results,page:e.page-1,totalCount:e.total})}))})),actions:[{icon:"info",tooltip:"User",onClick:(e,t)=>alert("User Id "+t._id)}],options:{actionsColumnIndex:-1}})})};var ve=function(){const e=r.a.createRef();return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(ue.a,{title:"Result",columns:[{title:"Test",field:"testId"},{title:"User",field:"userId"},{title:"Switch",field:"switchCounter"},{title:"Max Score",field:"max"},{title:"Score",field:"score"},{title:"Has Attempted",field:"hasAttempted"}],data:e=>new Promise(((t,a)=>{((e,t,a)=>{const n=j();return fetch("https://pariksha-d9q1.onrender.com/api/admin/responses?page="+e+"&limit="+t+(a?"&search="+a:""),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",authorization:"Bearer "+n}}).then((e=>e.json())).catch((e=>e))})(e.page+1,e.pageSize).then((e=>{t({data:e.results,page:e.page-1,totalCount:e.total})}))})),actions:[{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:()=>e.current&&e.current.onQueryChange()}],editable:{onRowDelete:e=>new Promise(((t,a)=>{setTimeout((()=>{((e,t)=>{const a=j();fetch("https://pariksha-d9q1.onrender.com/api"+"/admin/response/".concat(e),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",authorization:"Bearer "+a},body:JSON.stringify(t)}).then((e=>e.json())).catch((e=>e))})(e._id),t()}),1e3)}))},options:{grouping:!0,actionsColumnIndex:-1,pageSizeOptions:[5,10,20,50,100,500],exportButton:!0}})})},we=a(19),Se=a(206),Ce=a(351);const ke=Object(g.a)((e=>({formControl:{margin:e.spacing(2,0),width:"100%"},root:{display:"flex",flexWrap:"wrap",justifyContent:"center","& > *":{margin:e.spacing(1,3)}},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},noLabel:{marginTop:e.spacing(3)}}))),Te={PaperProps:{style:{maxHeight:224,width:250}}};function Ne(e,t,a){return{fontWeight:-1===t.indexOf(e)?a.typography.fontWeightRegular:a.typography.fontWeightMedium}}function Ie(){const e=ke(),[t,a]=r.a.useState({selectedFile:"",title:"",description:"",category:[],selectedMandatoryCategory:[],selectedOptionalCategory:[],startTime:"2021-1-1T12:00",endTime:"2021-1-1T12:00"}),i=e=>{a(Object(l.a)(Object(l.a)({},t),{},{[e.target.name]:e.target.value}))},{title:s,description:o,category:c,selectedMandatoryCategory:d,selectedOptionalCategory:m,startTime:h,endTime:b,selectedFile:u}=t,g=Object(we.a)();return Object(n.useEffect)((()=>{!async function(){(()=>{const e=j();return fetch("https://pariksha-d9q1.onrender.com/api/admin/category",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",authorization:"Bearer "+e}}).then((e=>e.json())).catch((e=>e))})().then((e=>{console.log(e),e.err||e.errors?W.c.error("Error"):a(Object(l.a)(Object(l.a)({},t),{},{category:e}))})).catch((e=>e))}()}),[]),Object(p.jsx)(O.a,{style:{width:"50%",margin:"auto"},children:Object(p.jsxs)(oe.a,{children:[Object(p.jsx)(y.a,{variant:"h5",align:"center",style:{paddingTop:"1rem"},children:" Create Test"}),Object(p.jsxs)("form",{className:e.root,noValidate:!0,autoComplete:"off",children:[Object(p.jsx)(Oe.a,{id:"outlined-full-width",label:"Title",placeholder:"Title for the Test",value:s,name:"title",style:{flexGrow:1},onChange:i,margin:"normal"}),Object(p.jsxs)("label",{htmlFor:"contained-button-file",style:{margin:".5rem 0",alignSelf:"end"},children:[Object(p.jsx)("input",{id:"contained-button-file",type:"file",style:{display:"none"},onChange:e=>{a(Object(l.a)(Object(l.a)({},t),{},{selectedFile:e.target.files[0]}))}}),Object(p.jsx)(T.a,{variant:"contained",component:"span",style:{marginRight:"1rem"},children:""===u?"Image":"Selected"})]}),Object(p.jsx)(Oe.a,{id:"outlined-full-width",label:"Description",placeholder:"Short Description for Test",fullWidth:!0,value:o,name:"description",onChange:i,margin:"normal"}),Object(p.jsxs)(le.a,{className:e.formControl,children:[Object(p.jsx)(de.a,{id:"demo-mutiple-chip-label",children:"Mandatory Category"}),Object(p.jsx)(me.a,{labelId:"demo-mutiple-chip-label",id:"demo-mutiple-chip",multiple:!0,value:d,onChange:e=>{a(Object(l.a)(Object(l.a)({},t),{},{selectedMandatoryCategory:e.target.value}))},input:Object(p.jsx)(Se.a,{id:"select-multiple-chip"}),renderValue:t=>Object(p.jsx)("div",{className:e.chips,children:t.map((t=>Object(p.jsx)(Ce.a,{label:t,className:e.chip},t)))}),MenuProps:Te,children:c.map((e=>Object(p.jsx)(he.a,{value:e,style:Ne(e,d,g),children:e},e)))})]}),Object(p.jsxs)(le.a,{className:e.formControl,children:[Object(p.jsx)(de.a,{id:"demo-mutiple-chip-label",children:"Optional Category"}),Object(p.jsx)(me.a,{labelId:"demo-mutiple-chip-label",id:"demo-mutiple-chip",multiple:!0,value:m,onChange:e=>{a(Object(l.a)(Object(l.a)({},t),{},{selectedOptionalCategory:e.target.value}))},input:Object(p.jsx)(Se.a,{id:"select-multiple-chip"}),renderValue:t=>Object(p.jsx)("div",{className:e.chips,children:t.map((t=>Object(p.jsx)(Ce.a,{label:t,className:e.chip},t)))}),MenuProps:Te,children:c.map((e=>Object(p.jsx)(he.a,{value:e,style:Ne(e,m,g),children:e},e)))})]}),Object(p.jsx)(le.a,{className:e.formControl,children:Object(p.jsx)(Oe.a,{id:"datetime-local",label:"Start Time",type:"datetime-local",onChange:e=>{a(Object(l.a)(Object(l.a)({},t),{},{startTime:e.target.value}))},defaultValue:h,className:e.textField,InputLabelProps:{shrink:!0},fullWidth:!0})}),Object(p.jsx)(le.a,{className:e.formControl,children:Object(p.jsx)(Oe.a,{id:"datetime-local",label:"End Time",type:"datetime-local",defaultValue:b,onChange:e=>{a(Object(l.a)(Object(l.a)({},t),{},{endTime:e.target.value}))},className:e.textField,InputLabelProps:{shrink:!0},fullWidth:!0})}),Object(p.jsx)(le.a,{className:e.formControl,gutterbottom:"true",children:Object(p.jsx)(T.a,{variant:"contained",color:"primary",align:"center",onClick:()=>{let e=new FormData;""!==u&&e.append("image",u),e.append("title",s),e.append("description",o),e.append("startTime",new Date(h).getTime()),e.append("endTime",new Date(b).getTime()),d.forEach((t=>e.append("mandatoryCategory",t))),m.forEach((t=>e.append("optionalCategory",t))),(e=>{const t=j();return fetch("https://pariksha-d9q1.onrender.com/api/admin/test",{method:"POST",headers:{Accept:"application/json",authorization:"Bearer "+t},body:e}).then((e=>e.json())).catch((e=>e))})(e).then((e=>{if(!0!==e.success)throw new Error(void 0!==e.errors?e.errors[0].msg:e.msg);W.c.success("Test Created Successfully!!")})).catch((e=>W.c.error(e.message)))},style:{margin:"1rem 0"},children:" Submit "})})]})]})})}function Ee(){const e=r.a.createRef();return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(ue.a,{title:"Test",tableRef:e,columns:[{title:"Title",field:"title"},{title:"Description",field:"description"},{title:"Mandatory Category",field:"mandatoryCategory",editable:"never"},{title:"Optional Category",field:"optionalCategory",editable:"never"},{title:"Start Time",field:"startTime"},{title:"End Time",field:"endTime"},{title:"createdAt",field:"createdAt",editable:"never"},{title:"updatedAt",field:"updatedAt",editable:"never"}],data:e=>new Promise(((t,a)=>{((e,t)=>{const a=j();return fetch("https://pariksha-d9q1.onrender.com/api/admin/tests?page="+e+"&limit="+t,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",authorization:"Bearer "+a}}).then((e=>e.json())).catch((e=>e))})(e.page+1,e.pageSize).then((e=>{t({data:e.results.map((e=>{var t=new Date(e.startTime),a=new Date(e.endTime);return Object(l.a)(Object(l.a)({},e),{},{startTime:t.toLocaleString(),endTime:a.toLocaleString()})})),page:e.page-1,totalCount:e.total})}))})),actions:[{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:()=>e.current&&e.current.onQueryChange()},{icon:"info",tooltip:"Display Data",onClick:(e,t)=>alert("Test Id : "+t._id)}],editable:{onRowUpdate:(e,t)=>new Promise(((a,n)=>{setTimeout((()=>{((e,t)=>{const a=j();t.startTime=new Date(t.startTime).getTime(),t.endTime=new Date(t.endTime).getTime(),fetch("https://pariksha-d9q1.onrender.com/api"+"/admin/test/".concat(e),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",authorization:"Bearer "+a},body:JSON.stringify(t)}).then((e=>e.json())).catch((e=>e))})(t._id,e),a()}),1e3)})),onRowDelete:e=>new Promise(((t,a)=>{setTimeout((()=>{(e=>{const t=j();fetch("https://pariksha-d9q1.onrender.com/api"+"/admin/test/".concat(e),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",authorization:"Bearer "+t}}).then((e=>e.json())).catch((e=>e))})(e._id),t()}),1e3)}))},options:{actionsColumnIndex:-1}})})}var Pe=a(504),Be=a(495),qe=a(359),Ae=a.n(qe);const De=Object(g.a)((e=>({root:{height:"100vh"},image:{backgroundImage:"url(https://source.unsplash.com/random)",backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}})));var Fe=Object(c.h)((function(e){const t=De(),[a,r]=Object(n.useState)({email:"pariksha@deloitte.com",password:"advancePass@123",error:"",loading:!1,didRedirect:!1}),{email:i,password:s,error:o,loading:c}=a,d=e=>t=>{r(Object(l.a)(Object(l.a)({},a),{},{error:!1,[e]:t.target.value}))};return Object(p.jsxs)(f.a,{container:!0,component:"main",className:t.root,children:[Object(p.jsx)(q.a,{}),Object(p.jsx)(f.a,{item:!0,xs:!1,sm:4,md:7,className:t.image}),Object(p.jsx)(f.a,{item:!0,xs:12,sm:8,md:5,component:oe.a,elevation:6,square:!0,children:Object(p.jsxs)("div",{className:t.paper,children:[Object(p.jsx)(Pe.a,{className:t.avatar,children:Object(p.jsx)(Ae.a,{})}),Object(p.jsx)(y.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(p.jsxs)("form",{className:t.form,noValidate:!0,children:[Object(p.jsx)(Oe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,value:i,id:"email",label:"Email Address",name:"email",autoComplete:"off",onChange:d("email"),autoFocus:!0}),Object(p.jsx)(Oe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,value:s,name:"password",label:"Password",type:"password",id:"password",onChange:d("password"),autoComplete:"off"}),Object(p.jsx)(T.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",style:{float:"right",padding:"0.5rem"},onClick:t=>{t.preventDefault(),r(Object(l.a)(Object(l.a)({},a),{},{error:!1,loading:!0})),m({email:i,password:s}).then((t=>{t.err||t.errors?(r(Object(l.a)(Object(l.a)({},a),{},{error:t.err?t.err:t.errors,loading:!1})),alert(o)):h(t,(()=>{e.history.push("../admin/main")}))})).catch((e=>e))},className:t.submit,children:c?Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(Z.a,{color:"light",style:{height:"1.75rem",width:"1.75rem",marginBottom:"-2px"}})}):"Sign In"}),Object(p.jsx)(O.a,{mt:5,children:Object(p.jsxs)(y.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(p.jsx)(Be.a,{color:"inherit",href:"/pariksha",children:"Your Website"})," ",(new Date).getFullYear(),"."]})})]})]})})]})})),Re=a(260),ze=a(362),Ue=a.n(ze),Le=a(363),Je=a.n(Le),We=a(264),He=a.n(We),Me=a(360),Ge=a.n(Me),_e=a(460),Ve=a(461),Qe=a(496),Ye=a(361),Ke=a.n(Ye),Xe=a(339),$e=a(493),Ze=a(265),et=a.n(Ze),tt=a(266),at=a.n(tt),nt=a(494),rt=a(6);class it extends r.a.Component{constructor(){super(...arguments),this.state={},this.handleClick=e=>{this.setState({[e]:!this.state[e]})}}componentDidMount(){if(this.props.match.params.platform){var e=this.props.match.params.platform.replace(/([A-Z])/g," $1").trim(),t=e.charAt(0).toUpperCase()+e.slice(1);this.setState({[t]:!this.state[this.props.match.params.platform]})}}render(){const e=[{id:1,title:"Dashboard",link:"/admin/main"},{id:2,title:"User",link:"/admin/user"},{id:7,title:"Webcam Monitor",link:"/admin/webcam"},{id:3,title:"Question",items:[{id:21,name:"Create",link:"/admin/question/create"},{id:22,name:"Manage",link:"/admin/question/manage"}]},{id:5,title:"Test",items:[{id:21,name:"Create",link:"/admin/test/create"},{id:22,name:"Manage",link:"/admin/test/manage"}]},{id:6,title:"Result",link:"/admin/result"},{id:4,title:"Feedback",link:"/admin/feedback"}],{classes:t}=this.props;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(nt.a,{}),Object(p.jsx)(_e.a,{className:t.root,children:e.map((a=>Object(p.jsxs)("div",{children:[null!=a.items?Object(p.jsxs)(Ve.a,{button:!0,onClick:this.handleClick.bind(this,a.title),children:[Object(p.jsx)(Qe.a,{children:Object(p.jsx)(He.a,{})}),Object(p.jsx)(Xe.a,{primary:a.title}),null!=a.items?Object(p.jsx)("div",{children:this.state[a.title]?Object(p.jsx)(et.a,{}):Object(p.jsx)(at.a,{})}):""]},a.id):Object(p.jsx)(o.b,{to:a.link,style:{color:"inherit",textDecoration:"none"},children:Object(p.jsxs)(Ve.a,{button:!0,onClick:this.handleClick.bind(this,a.title),children:[Object(p.jsx)(Qe.a,{children:"Webcam Monitor"===a.title?Object(p.jsx)(Ge.a,{}):Object(p.jsx)(He.a,{})}),Object(p.jsx)(Xe.a,{primary:a.title}),null!=a.items?Object(p.jsx)("div",{children:this.state[a.title]?Object(p.jsx)(et.a,{}):Object(p.jsx)(at.a,{})}):""]},a.id)}),null!=a.items?Object(p.jsxs)("div",{children:[Object(p.jsx)($e.a,{component:"li",in:this.state[a.title],timeout:"auto",unmountOnExit:!0,children:Object(p.jsx)(_e.a,{disablePadding:!0,children:a.items.map((e=>Object(p.jsx)(o.b,{to:e.link,style:{color:"inherit",textDecoration:"none"},children:Object(p.jsxs)(Ve.a,{button:!0,className:t.nested,children:[Object(p.jsx)(Qe.a,{children:Object(p.jsx)(Ke.a,{})}),Object(p.jsx)(Xe.a,{primary:e.name},e.id)]},e.id)})))})},e.id)," "]}):" "]},a.id)))})]})}}var st=Object(rt.a)((e=>({root:{width:"100%",maxWidth:360,background:e.palette.background.paper},nested:{paddingLeft:e.spacing(4)}})))(Object(c.h)(it));const ot=Object(g.a)((e=>({root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:Object(l.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:{overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7),[e.breakpoints.up("sm")]:{width:e.spacing(9)}},appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}})));var ct=Object(c.h)((function(e){const t=ot(),[a,i]=r.a.useState(!0);return Object(n.useEffect)((()=>{!async function(){localStorage.getItem("token")||e.history.push("/admin")}()}),[e.history]),Object(p.jsxs)("div",{className:t.root,children:[Object(p.jsx)(q.a,{}),Object(p.jsx)(I.a,{position:"absolute",className:Object(P.a)(t.appBar,a&&t.appBarShift),children:Object(p.jsxs)(E.a,{className:t.toolbar,children:[Object(p.jsx)(Re.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:()=>{i(!0)},className:Object(P.a)(t.menuButton,a&&t.menuButtonHidden),children:Object(p.jsx)(Ue.a,{})}),Object(p.jsx)(y.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:t.title,children:"Dashboard"}),Object(p.jsx)(Re.a,{color:"inherit",onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("name"),localStorage.removeItem("email"),e.history.push("/admin")},children:Object(p.jsx)(J.a,{})})]})}),Object(p.jsxs)(B.a,{variant:"permanent",classes:{paper:Object(P.a)(t.drawerPaper,!a&&t.drawerPaperClose)},open:a,children:[Object(p.jsx)("div",{className:t.toolbarIcon,children:Object(p.jsx)(Re.a,{onClick:()=>{i(!1)},children:Object(p.jsx)(Je.a,{})})}),Object(p.jsx)(st,{})]}),Object(p.jsxs)("main",{className:t.content,children:[Object(p.jsx)("div",{className:t.appBarSpacer}),Object(p.jsx)(x.a,{maxWidth:"lg",className:t.container,children:e.children})]})]})}));const lt=["component"];var dt=e=>{let{component:t}=e,a=Object(d.a)(e,lt);return Object(p.jsx)(c.b,Object(l.a)(Object(l.a)({},a),{},{render:e=>j()?Object(p.jsx)(ct,{children:Object(p.jsx)(t,Object(l.a)({},e))}):Object(p.jsx)(c.a,{to:{pathname:"/admin",state:{from:e.location}}})}))};const mt=Object(g.a)((e=>({paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:200,textAlign:"center",alignItems:"center",alignContent:"center"},img:{height:"-webkit-fill-available",width:"-webkit-fill-available"},img1:{height:"-webkit-fill-available",width:"70%"}})));function ht(){const e=mt(),t=Object(P.a)(e.paper,e.fixedHeight),[a,r]=Object(n.useState)({users:0,questions:0,tests:0,responses:0,feedbacks:0}),{users:i,questions:s,feedbacks:o,tests:c,responses:d}=a;return Object(n.useEffect)((()=>{!async function(){(()=>{const e=j();return fetch("https://pariksha-d9q1.onrender.com/api/admin/count",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",authorization:"Bearer "+e}}).then((e=>e.json())).catch((e=>e))})().then((e=>{e.err||e.errors?alert("error"):r(Object(l.a)(Object(l.a)({},a),e.msg))})).catch((e=>e))}()}),[]),Object(p.jsxs)(f.a,{container:!0,spacing:3,direction:"row",justify:"center",alignItems:"center",children:[Object(p.jsx)(f.a,{item:!0,xs:12,md:4,lg:4,children:Object(p.jsxs)(oe.a,{className:t,children:[Object(p.jsx)(y.a,{component:"h2",variant:"h6",align:"right",color:"primary",gutterbottom:!0,children:"Users"}),Object(p.jsx)(y.a,{component:"p",variant:"h1",children:i})]})}),Object(p.jsx)(f.a,{item:!0,xs:12,md:4,lg:4,children:Object(p.jsxs)(oe.a,{className:t,children:[Object(p.jsx)(y.a,{component:"h2",variant:"h6",align:"right",color:"primary",gutterbottom:!0,children:"Questions"}),Object(p.jsx)(y.a,{component:"p",variant:"h1",children:s})]})}),Object(p.jsx)(f.a,{item:!0,xs:12,md:4,lg:4,children:Object(p.jsxs)(oe.a,{className:t,children:[Object(p.jsx)(y.a,{component:"h2",variant:"h6",align:"right",color:"primary",gutterbottom:!0,children:"Test"}),Object(p.jsx)(y.a,{component:"p",variant:"h1",children:c})]})}),Object(p.jsx)(f.a,{item:!0,xs:12,md:4,lg:4,children:Object(p.jsxs)(oe.a,{className:t,children:[Object(p.jsx)(y.a,{component:"h2",variant:"h6",align:"right",color:"primary",gutterbottom:!0,children:"Response"}),Object(p.jsx)(y.a,{component:"p",variant:"h1",children:d})]})}),Object(p.jsx)(f.a,{item:!0,xs:12,md:4,lg:4,children:Object(p.jsxs)(oe.a,{className:t,children:[Object(p.jsx)(y.a,{component:"h2",variant:"h6",align:"right",color:"primary",gutterbottom:!0,children:"Feedbacks"}),Object(p.jsx)(y.a,{component:"p",variant:"h1",children:o})]})})]})}var jt=function(){return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(ue.a,{title:"User",columns:[{title:"Name",field:"name",editable:"never"},{title:"Email",field:"email",editable:"never"},{title:"updatedAt",field:"updatedAt",editable:"never"},{title:"createdAt",field:"createdAt",editable:"never"}],data:e=>new Promise(((t,a)=>{((e,t,a)=>{const n=j();return fetch("https://pariksha-d9q1.onrender.com/api/admin/users?page="+e+"&limit="+t+(a?"&search="+a:""),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",authorization:"Bearer "+n}}).then((e=>e.json())).catch((e=>e))})(e.page+1,e.pageSize,e.search).then((e=>{t({data:e.results,page:e.page-1,totalCount:e.total})}))})),editable:{onRowUpdate:(e,t)=>new Promise(((a,n)=>{setTimeout((()=>{((e,t)=>{const a=j();fetch("https://pariksha-d9q1.onrender.com/api"+"/admin/user/".concat(e),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",authorization:"Bearer "+a},body:JSON.stringify(t)}).then((e=>e.json())).catch((e=>e))})(t._id,e),a()}),1e3)})),onRowDelete:e=>new Promise(((t,a)=>{setTimeout((()=>{(e=>{const t=j();fetch("https://pariksha-d9q1.onrender.com/api"+"/admin/user/".concat(e),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",authorization:"Bearer "+t}}).then((e=>e.json())).catch((e=>e))})(e._id),t()}),1e3)}))},options:{grouping:!0,actionsColumnIndex:-1,pageSizeOptions:[5,10,20,50,100,500],exportButton:!0,search:!0}})})},pt=a(326),bt=a(497),ut=a(498),gt=a(499),Ot=a(500),xt=a(501);const ft=Object(g.a)((e=>({root:{padding:e.spacing(2)},monitorGrid:{marginTop:e.spacing(2)},videoCard:{position:"relative",marginBottom:e.spacing(2),minHeight:"250px"},videoContainer:{position:"relative",width:"100%",height:"200px",backgroundColor:"#000",borderRadius:e.shape.borderRadius,overflow:"hidden"},video:{width:"100%",height:"100%",objectFit:"cover"},videoOverlay:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0, 0, 0, 0.7)",color:"white"},userInfo:{position:"absolute",top:e.spacing(1),left:e.spacing(1),zIndex:1},statusChip:{position:"absolute",top:e.spacing(1),right:e.spacing(1),zIndex:1},controls:{position:"absolute",bottom:e.spacing(1),right:e.spacing(1),zIndex:1},statsCard:{marginBottom:e.spacing(2)},noStreams:{textAlign:"center",padding:e.spacing(4),color:e.palette.text.secondary},loadingContainer:{display:"flex",justifyContent:"center",alignItems:"center",height:"200px"}})));var yt=()=>{const e=ft(),[t,a]=Object(n.useState)({}),[r,i]=Object(n.useState)({totalStreams:0,activeStreams:0,disconnectedStreams:0}),[s,o]=Object(n.useState)(!0),[c,d]=Object(n.useState)(null),[m,h]=Object(n.useState)(null),j=Object(n.useRef)(null),b=Object(n.useRef)({});Object(n.useEffect)((()=>(j.current=Object(ie.a)("https://pariksha-d9q1.onrender.com/api",{transports:["websocket"]}),j.current.on("connect",(()=>{console.log("Connected to monitoring server"),o(!1),d(null)})),j.current.on("connect_error",(e=>{console.error("Connection error:",e),d("Failed to connect to monitoring server"),o(!1)})),j.current.on("activeStreams",(e=>{console.log("Received active streams:",e);const t={};e.forEach((e=>{t[e.userId]=Object(l.a)(Object(l.a)({},e),{},{lastSeen:Date.now()})})),a(t)})),j.current.on("videoStream",(e=>{console.log("Received video stream:",e),a((t=>Object(l.a)(Object(l.a)({},t),{},{[e.userId]:Object(l.a)(Object(l.a)(Object(l.a)({},t[e.userId]),e),{},{lastSeen:Date.now(),status:"active"})})))})),j.current.on("streamUpdate",(e=>{a((t=>Object(l.a)(Object(l.a)({},t),{},{[e.userId]:Object(l.a)(Object(l.a)(Object(l.a)({},t[e.userId]),e),{},{lastSeen:Date.now()})})))})),j.current.on("streamDisconnected",(e=>{a((t=>Object(l.a)(Object(l.a)({},t),{},{[e.userId]:Object(l.a)(Object(l.a)({},t[e.userId]),{},{status:"disconnected",lastSeen:Date.now()})})))})),j.current.on("videoData",(e=>{const t=b.current[e.userId];if(t&&e.chunk){const a=new FileReader;a.onload=()=>{t.src=a.result},a.readAsDataURL(e.chunk)}})),()=>{j.current&&j.current.disconnect()})),[]),Object(n.useEffect)((()=>{const e=Object.values(t);i({totalStreams:e.length,activeStreams:e.filter((e=>"active"===e.status)).length,disconnectedStreams:e.filter((e=>"disconnected"===e.status)).length})}),[t]),Object(n.useEffect)((()=>{const e=setInterval((()=>{const e=Date.now();a((t=>{const a=Object(l.a)({},t);return Object.keys(a).forEach((t=>{e-a[t].lastSeen>3e4&&(a[t]=Object(l.a)(Object(l.a)({},a[t]),{},{status:"disconnected"}))})),a}))}),5e3);return()=>clearInterval(e)}),[]);const u=()=>{o(!0),j.current&&j.current.emit("requestStreams")},g=e=>{switch(e){case"active":return"success";case"disconnected":return"error";default:return"default"}},x=(t,a)=>{const n=m===t;return Object(p.jsx)(f.a,{item:!0,xs:12,sm:6,md:4,lg:3,children:Object(p.jsxs)(v.a,{className:e.videoCard,children:[Object(p.jsxs)("div",{className:e.videoContainer,children:[Object(p.jsx)("video",{ref:e=>b.current[t]=e,className:e.video,autoPlay:!0,muted:!0,playsInline:!0}),"active"!==a.status&&Object(p.jsx)("div",{className:e.videoOverlay,children:Object(p.jsxs)(O.a,{textAlign:"center",children:[Object(p.jsx)(bt.a,{fontSize:"large"}),Object(p.jsx)(y.a,{variant:"body2",children:"disconnected"===a.status?"Disconnected":"No Stream"})]})}),Object(p.jsx)("div",{className:e.userInfo,children:Object(p.jsx)(Ce.a,{icon:Object(p.jsx)(ut.a,{}),label:a.userName||"User ".concat(t.slice(0,8)),size:"small",color:"primary",variant:"outlined"})}),Object(p.jsx)("div",{className:e.statusChip,children:Object(p.jsx)(Ce.a,{label:a.status,size:"small",color:g(a.status),variant:"filled"})}),Object(p.jsx)("div",{className:e.controls,children:Object(p.jsx)(pt.a,{title:n?"Exit Fullscreen":"Fullscreen",children:Object(p.jsx)(Re.a,{size:"small",onClick:()=>(e=>{h(m===e?null:e)})(t),style:{color:"white"},children:n?Object(p.jsx)(gt.a,{}):Object(p.jsx)(Ot.a,{})})})})]}),Object(p.jsxs)(C.a,{children:[Object(p.jsxs)(y.a,{variant:"body2",color:"textSecondary",children:["Test: ",a.testName||"Unknown"]}),Object(p.jsxs)(y.a,{variant:"caption",color:"textSecondary",children:["Last seen: ",new Date(a.lastSeen).toLocaleTimeString()]})]})]})},t)};if(s)return Object(p.jsxs)("div",{className:e.loadingContainer,children:[Object(p.jsx)(Z.a,{}),Object(p.jsx)(y.a,{variant:"body1",style:{marginLeft:16},children:"Connecting to monitoring server..."})]});if(c)return Object(p.jsx)(O.a,{className:e.root,children:Object(p.jsxs)(oe.a,{style:{padding:16,backgroundColor:"#ffebee",border:"1px solid #f44336",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[Object(p.jsx)(y.a,{variant:"body1",style:{color:"#d32f2f"},children:c}),Object(p.jsx)(Re.a,{onClick:u,color:"inherit",children:Object(p.jsx)(xt.a,{})})]})});const w=Object.entries(t);return Object(p.jsxs)("div",{className:e.root,children:[Object(p.jsx)(y.a,{variant:"h4",gutterBottom:!0,children:"Live Webcam Monitoring"}),Object(p.jsxs)(f.a,{container:!0,spacing:2,className:e.statsCard,children:[Object(p.jsx)(f.a,{item:!0,xs:12,sm:4,children:Object(p.jsxs)(oe.a,{className:e.statsCard,style:{padding:16,textAlign:"center"},children:[Object(p.jsx)(y.a,{variant:"h6",color:"primary",children:r.totalStreams}),Object(p.jsx)(y.a,{variant:"body2",color:"textSecondary",children:"Total Streams"})]})}),Object(p.jsx)(f.a,{item:!0,xs:12,sm:4,children:Object(p.jsxs)(oe.a,{className:e.statsCard,style:{padding:16,textAlign:"center"},children:[Object(p.jsx)(y.a,{variant:"h6",color:"success.main",children:r.activeStreams}),Object(p.jsx)(y.a,{variant:"body2",color:"textSecondary",children:"Active Streams"})]})}),Object(p.jsx)(f.a,{item:!0,xs:12,sm:4,children:Object(p.jsxs)(oe.a,{className:e.statsCard,style:{padding:16,textAlign:"center"},children:[Object(p.jsx)(y.a,{variant:"h6",color:"error.main",children:r.disconnectedStreams}),Object(p.jsx)(y.a,{variant:"body2",color:"textSecondary",children:"Disconnected"})]})})]}),Object(p.jsxs)(O.a,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[Object(p.jsxs)(y.a,{variant:"h6",children:["Active Test Sessions (",w.length,")"]}),Object(p.jsx)(Re.a,{onClick:u,color:"primary",children:Object(p.jsx)(xt.a,{})})]}),0===w.length?Object(p.jsxs)(oe.a,{className:e.noStreams,children:[Object(p.jsx)(bt.a,{fontSize:"large"}),Object(p.jsx)(y.a,{variant:"h6",gutterBottom:!0,children:"No Active Streams"}),Object(p.jsx)(y.a,{variant:"body2",children:"Test takers will appear here when they start their exams."})]}):Object(p.jsx)(f.a,{container:!0,spacing:2,className:e.monitorGrid,children:w.map((e=>{let[t,a]=e;return x(t,a)}))}),m&&t[m]&&Object(p.jsx)(O.a,{position:"fixed",top:0,left:0,right:0,bottom:0,bgcolor:"black",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",onClick:()=>h(null),children:Object(p.jsxs)(O.a,{position:"relative",width:"90%",height:"90%",children:[Object(p.jsx)("video",{ref:e=>b.current[m]=e,style:{width:"100%",height:"100%",objectFit:"contain"},autoPlay:!0,muted:!0,playsInline:!0}),Object(p.jsx)(Re.a,{style:{position:"absolute",top:16,right:16,color:"white",backgroundColor:"rgba(0,0,0,0.5)"},onClick:()=>h(null),children:Object(p.jsx)(gt.a,{})})]})})]})};class vt extends n.Component{constructor(e){super(e),this.onSubmit=e=>{if(e.preventDefault(),""===this.state.quality||""===this.state.feedback)""===this.state.feedback&&(this.setState((e=>Object(l.a)(Object(l.a)({},e),{},{error:"Please Specify FeedBack!"}))),document.getElementById("errorText").classList.add("d-block")),""===this.state.quality&&(this.setState((e=>Object(l.a)(Object(l.a)({},e),{},{error:"Please Specify Rating!"}))),document.getElementById("errorText").classList.add("d-block"));else{this.setState((e=>Object(l.a)(Object(l.a)({},e),{},{loading:!0})));let e=this;(e=>{const t=j();return fetch("https://pariksha-d9q1.onrender.com/api/student/submit-feedback",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:"Bearer "+t},body:JSON.stringify(e)}).then((e=>e.json())).catch((e=>console.log(e)))})({quality:this.state.quality,feedback:this.state.feedback}).then((t=>{console.log("Success"),e.setState((e=>Object(l.a)(Object(l.a)({},e),{},{didRedirect:!0})))})).catch((e=>e))}},this.performRedirect=()=>{if(this.state.didRedirect)return Object(p.jsx)(c.a,{to:"/student/dashboard"})},this.handleChange=e=>t=>{let a=t.target.value;document.getElementById("errorText").classList.remove("d-block"),this.setState((t=>Object(l.a)(Object(l.a)({},t),{},{[e]:a})))},this.state={feedback:"",quality:"",loading:!1,didRedirect:!1}}render(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(G,{children:Object(p.jsx)(f.a,{container:!0,alignContent:"center",justifyContent:"center",children:Object(p.jsxs)(f.a,{item:!0,component:oe.a,style:{padding:"2rem",marginTop:"1.5rem",textAlign:"center"},children:[Object(p.jsx)("h1",{children:"FEEDBACK"}),Object(p.jsx)("p",{children:"We would love to hear your thoughts, concerns or problems with anything so we can improve !"}),Object(p.jsx)("p",{children:"Take a moment to fill out this form."}),Object(p.jsx)("h3",{children:"How Do You Rate Your Overall Experience ?"}),Object(p.jsxs)(f.a,{container:!0,alignContent:"center",children:[Object(p.jsxs)(f.a,{item:!0,lg:4,md:4,sm:4,xs:4,children:[Object(p.jsx)("input",{onChange:this.handleChange("quality"),type:"radio",name:"exp",value:"Good"})," ","Good"]}),Object(p.jsxs)(f.a,{item:!0,lg:4,md:4,sm:4,xs:4,children:[Object(p.jsx)("input",{onChange:this.handleChange("quality"),type:"radio",name:"exp",value:"Average"})," ","Average"]}),Object(p.jsxs)(f.a,{item:!0,lg:4,md:4,sm:4,xs:4,children:[Object(p.jsx)("input",{onChange:this.handleChange("quality"),type:"radio",name:"exp",value:"Bad"})," ","Bad"]})]}),Object(p.jsx)("div",{className:"row justify-content-center mb-5 mt-2",children:Object(p.jsxs)("form",{style:{width:"50%"},children:[Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("textarea",{className:"form-control",rows:"5",id:"Suggestion",onChange:this.handleChange("feedback"),value:this.state.feedback,placeholder:"Enter Your Suggestion"}),Object(p.jsx)("div",{className:"invalid-feedback text-center pt-2",id:"errorText",children:this.state.error})]}),Object(p.jsx)(T.a,{type:"submit",variant:"contained",style:{fontSize:"20px"},onClick:this.onSubmit,children:this.state.loading?Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(Z.a,{color:"light",style:{height:"1.7rem",width:"1.7rem",marginBottom:"-2px"}})}):"Submit"})]})})]})})}),this.performRedirect()]})}}var wt=Object(c.h)((e=>{const[t,a]=Object(n.useState)({hour:JSON.parse(localStorage.getItem("time")).hour,minute:JSON.parse(localStorage.getItem("time")).minute,second:JSON.parse(localStorage.getItem("time")).second}),[r,i]=Object(n.useState)({data:JSON.parse(localStorage.getItem("questions")),id:JSON.parse(localStorage.getItem("questions"))[0]._id,option:NaN,save:JSON.parse(localStorage.getItem("save")),mark:JSON.parse(localStorage.getItem("mark")),index:0,loading:!1,isCameraOne:!1,error:"",isStreaming:!1}),[s,o]=Object(n.useState)(!1),c=()=>o(!1),d=()=>o(!0),[m,h]=Object(n.useState)(!1),b=()=>h(!1),u=()=>h(!0),{hour:g,minute:O,second:x}=t,{data:f,index:y,error:v,loading:w,isCameraOne:S,id:C,option:k,save:I,mark:E}=r,P=e=>t=>{document.getElementById("errorText").classList.remove("d-block"),localStorage.setItem("index",t.currentTarget.value);var a=JSON.parse(localStorage.getItem("questions")),n=JSON.parse(localStorage.getItem("mark")).find((e=>e.question===a[t.currentTarget.value]._id));n=void 0===n?NaN:n.response,i(Object(l.a)(Object(l.a)({},r),{},{[e]:parseInt(t.currentTarget.value),id:a[t.currentTarget.value]._id,option:n}))},B=()=>{0===g&&0===O&&0===x||((()=>{const e=localStorage.getItem("test-token");return fetch("https://pariksha-d9q1.onrender.com/api/test/unfairAttempt",{method:"PATCH",headers:{Accept:"application/json","Content-Type":"application/json",authorization:"Bearer "+e}}).then((e=>e.json())).catch((e=>console.log(e)))})().then((e=>{i(Object(l.a)(Object(l.a)({},r),{},{error:"This is Not Allowed And Will Be Reported to Admin!"}))})),d())};Object(n.useEffect)((()=>{if(0===g&&0===O&&0===x){var t=JSON.parse(localStorage.getItem("mark")).map((e=>({question:e.question,response:e.response})));N({responses:t}).then((e=>{e.success?(i(Object(l.a)(Object(l.a)({},r),{},{end:!0})),St(),window.location.href="/pariksha/student/feedback"):(i(Object(l.a)(Object(l.a)({},r),{},{error:e.error})),d())})).catch((e=>e))}let n=setInterval((()=>{x>0&&(a((e=>Object(l.a)(Object(l.a)({},e),{},{second:e.second-1}))),localStorage.setItem("time",JSON.stringify({hour:g,second:x,minute:O}))),0===x&&(0===O?0===g?(i(Object(l.a)(Object(l.a)({},r),{},{error:"Test Has Ended"})),St(),e.history.push("/student/feedback")):(a((e=>({hour:e.hour-1,minute:59,second:59}))),localStorage.setItem("time",JSON.stringify({hour:g,second:x,minute:O}))):(a((e=>Object(l.a)(Object(l.a)({},e),{},{minute:O-1,second:59}))),localStorage.setItem("time",JSON.stringify({hour:g,second:x,minute:O}))))}),1e3);return window.addEventListener("blur",B),function(){window.removeEventListener("blur",B),clearInterval(n)}}),[g,O,x]);const q=()=>{if(isNaN(k))i(Object(l.a)(Object(l.a)({},r),{},{error:"Please Select Any Option!"})),document.getElementById("errorText").classList.add("d-block");else{i(Object(l.a)(Object(l.a)({},r),{},{error:!1,loading:!0}));let t={question:C,response:parseInt(k)};(e=>{const t=localStorage.getItem("test-token");return fetch("https://pariksha-d9q1.onrender.com/api/test/submit-responses",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:"Bearer "+t},body:JSON.stringify({responses:[e]})}).then((e=>e.json())).catch((e=>console.log(e)))})(t).then((a=>{if(a.err)i(Object(l.a)(Object(l.a)({},r),{},{error:a.err,loading:!1})),d();else if(a.error)i(Object(l.a)(Object(l.a)({},r),{},{error:a.error,loading:!1})),d();else if(a.message)i(Object(l.a)(Object(l.a)({},r),{},{error:a.message})),e.history.push("/student/feedback");else{var n=I.slice(),s=I.findIndex((e=>e.question===C));-1===s?(t.index=y,n.push(t)):n[s].response=parseInt(k),localStorage.setItem("save",JSON.stringify(n)),i(Object(l.a)(Object(l.a)({},r),{},{loading:!1,save:n}));var o=document.getElementById("next");console.log(o.value),console.log(y),o.click()}})).catch((e=>console.log(e)))}},A=e=>{if(!1===S)console.log("some"),i(Object(l.a)(Object(l.a)({},r),{},{error:"Please Turn On Camera!"})),document.getElementById("errorText").classList.add("d-block");else{let n=e.target.value;var t=E.slice(),a=E.findIndex((e=>e.question===C));-1===a?t.push({question:C,response:parseInt(n),index:y}):t[a].response=parseInt(n),localStorage.setItem("mark",JSON.stringify(t)),i((e=>Object(l.a)(Object(l.a)({},e),{},{mark:t,option:n})))}},D=e=>{let t=["col-2","btn","rounded-circle","text-center","m-2"];var a=E.findIndex((t=>t.index===e)),n=I.findIndex((t=>t.index===e));return y===e?t.push("btn-info"):-1!==n?t.push("btn-success"):-1!==a?t.push("btn-warning"):t.push("btn-light"),t.join(" ")},F=e=>{const t=[];for(const[a,n]of f[e].options.entries())t.push(Object(p.jsxs)("li",{className:"py-md-1",children:[" ",Object(p.jsx)("input",{className:"mx-3",type:"radio",name:"option".concat(C),value:a+1,onChange:A,checked:parseInt(k)===a+1},a),n]},a));return Object(p.jsxs)("div",{className:"col-md-12",children:[Object(p.jsxs)("h5",{style:{display:"inline-block"},className:"py-md-3",children:[y+1,". \xa0",f[e].question," ",Object(p.jsx)("br",{}),f[e].QuestionPic&&""!==f[e].QuestionPic?Object(p.jsx)("img",{src:f[e].QuestionPic,alt:"question"}):Object(p.jsx)(p.Fragment,{})]}),Object(p.jsx)("input",{type:"text",className:"d-none",value:C,readonly:!0}),Object(p.jsx)("ul",{style:{listStyle:"none"},children:t})]})},R=e=>{c();var t=JSON.parse(localStorage.getItem("mark")).map((e=>({question:e.question,response:e.response})));N({responses:t}).then((e=>{e.success?(i(Object(l.a)(Object(l.a)({},r),{},{end:!0})),St(),window.location.href="/pariksha/student/feedback"):(i(Object(l.a)(Object(l.a)({},r),{},{error:e.error})),d())})).catch((e=>e))},z=()=>{if(-1!==I.findIndex((e=>e.index===y)))i(Object(l.a)(Object(l.a)({},r),{},{error:"Can Not Unmark Saved Response!"})),document.getElementById("errorText").classList.add("d-block");else{var e=E.slice().filter((e=>e.index!==y));localStorage.setItem("mark",JSON.stringify(e)),i((t=>Object(l.a)(Object(l.a)({},t),{},{mark:e,option:NaN})))}};Object(n.useEffect)((()=>((async()=>{try{const e=await j();if(!e)return void i((e=>Object(l.a)(Object(l.a)({},e),{},{error:"Authentication required"})));await se.connect(e);const t=await se.startVideoStreaming();i((e=>Object(l.a)(Object(l.a)({},e),{},{isCameraOne:!0,isStreaming:!0}))),document.getElementById("cam")&&(document.getElementById("cam").srcObject=t);const a=setInterval((()=>{se.sendStreamUpdate({testId:localStorage.getItem("testId"),questionIndex:y,timeRemaining:"".concat(g,":").concat(O,":").concat(x),status:"active"})}),5e3)}catch(v){console.error("Webcam initialization error:",v);let t="Camera access denied or not available";v.message.includes("Camera access denied")?t="Camera access denied. Please allow camera permissions and refresh the page.":v.message.includes("No camera found")?t="No camera found. Please connect a camera and try again.":v.message.includes("Camera is already in use")?t="Camera is already in use by another application. Please close other applications using the camera.":v.message.includes("HTTPS or localhost")?t="Camera access requires HTTPS or localhost. Please use a secure connection.":v.message.includes("not supported")?t="Camera access not supported in this browser. Please use a modern browser.":v.message.includes("WebSocket not connected")&&(t="Cannot connect to server. Please check your internet connection and try again."),i((e=>Object(l.a)(Object(l.a)({},e),{},{error:t,isCameraOne:!1,isStreaming:!1})))}})(),()=>{se.stopVideoStreaming(),se.disconnect()})),[g,O,x,y]);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)($.a,{show:s,onHide:c,centered:!0,children:[Object(p.jsx)($.a.Header,{closeButton:!0,children:Object(p.jsx)($.a.Title,{children:"Test Portal"})}),Object(p.jsx)($.a.Body,{children:v}),Object(p.jsx)($.a.Footer,{children:Object(p.jsx)(T.a,{variant:"outlined",onClick:c,children:"Close"})})]})}),Object(p.jsx)("section",{className:"student",style:{height:"100vh",margin:"0"},children:Object(p.jsx)("div",{children:Object(p.jsx)(G,{children:Object(p.jsxs)("div",{className:"container",style:{height:"70vh",marginTop:"3vh"},children:[Object(p.jsx)("div",{className:"row h-100",children:Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(oe.a,{className:"col-md-8 mx-4 p-5",children:[Object(p.jsx)("div",{className:"row",style:{height:"60vh",overflow:"scroll"},children:F(y)}),Object(p.jsxs)("div",{className:"row",children:[Object(p.jsx)("div",{className:"col-md-3",children:Object(p.jsx)("div",{className:"invalid-feedback text-center",id:"errorText",children:v})}),Object(p.jsxs)("div",{className:"col-md-9",style:{textAlign:"-webkit-right"},children:[0===y?null:Object(p.jsxs)(T.a,{className:"m-1",variant:"outlined",value:y-1,onClick:P("index"),children:[" ","Previous"," "]}),Object(p.jsx)(T.a,{className:"m-1",variant:"outlined",onClick:z,children:"Unmark"}),Object(p.jsx)(T.a,{className:"m-1",variant:"outlined",onClick:q,children:w?Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(Z.a,{color:"light",style:{height:"1rem",width:"1rem",marginBottom:"-2px"}})}):"Submit Answer"}),y===f.length-1?null:Object(p.jsx)(T.a,{variant:"outlined",className:"m-1",id:"next",value:y+1,onClick:P("index"),children:"Next"})]})]})]}),Object(p.jsxs)("div",{className:"col-md-3 m-auto",children:[Object(p.jsx)(oe.a,{className:"row mb-4",children:Object(p.jsxs)("div",{className:"col-md-12 text-center display-3 my-2",children:[g,":",O<10?"0".concat(O):O,":",x<10?"0".concat(x):x]})}),Object(p.jsx)("div",{className:"mb-4",children:Object(p.jsx)(T.a,{variant:"contained",style:{width:"100%",background:"#dc3545",color:"white"},onClick:u,children:"End Test"})}),Object(p.jsx)(oe.a,{className:"row justify-content-center py-2",style:{backgroundColor:"white",flexFlow:"row wrap"},children:f.map(((e,t)=>Object(p.jsx)("button",{className:""+D(t),value:t,style:{lineHeight:"2rem"},onClick:P("index"),children:t+1})))})]})]})}),Object(p.jsx)(re.a,{id:"cam",style:{display:"none"}})]})})})}),Object(p.jsxs)($.a,{show:m,onHide:b,centered:!0,children:[Object(p.jsx)($.a.Header,{closeButton:!0,children:Object(p.jsx)($.a.Title,{children:"Test Portal"})}),Object(p.jsx)($.a.Body,{children:"Are You Sure? Once Submitted You Can Not Attempt Again."}),Object(p.jsxs)($.a.Footer,{children:[Object(p.jsx)(T.a,{variant:"secondary",onClick:b,children:"Close"}),Object(p.jsx)(T.a,{variant:"primary",onClick:R,children:"Yes"})]})]})]})}));function St(){localStorage.removeItem("test-token"),localStorage.removeItem("data"),localStorage.removeItem("index"),localStorage.removeItem("questions"),localStorage.removeItem("time"),localStorage.removeItem("save"),localStorage.removeItem("mark")}class Ct extends n.Component{render(){return Object(p.jsx)(o.a,{basename:"/pariksha",children:Object(p.jsxs)(c.d,{children:[Object(p.jsx)(c.b,{path:"/mobile",children:Object(p.jsx)("h1",{children:"Not For Mobile"})}),Object(p.jsx)(dt,{path:"/admin/main",component:ht}),Object(p.jsx)(dt,{path:"/admin/user",component:jt}),Object(p.jsx)(dt,{path:"/admin/webcam",component:yt}),Object(p.jsx)(dt,{path:"/admin/question/manage",component:ge}),Object(p.jsx)(dt,{path:"/admin/question/create",component:fe}),Object(p.jsx)(dt,{path:"/admin/feedback",component:ye}),Object(p.jsx)(dt,{path:"/admin/test/create",component:Ie}),Object(p.jsx)(dt,{path:"/admin/test/manage",component:Ee}),Object(p.jsx)(dt,{path:"/admin/result",component:ve}),Object(p.jsx)(c.b,{path:"/admin",component:Fe}),Object(p.jsx)(u,{path:"/student/dashboard",component:V}),Object(p.jsx)(u,{path:"/student/questions",component:wt}),Object(p.jsx)(u,{path:"/student/feedback",component:vt}),Object(p.jsx)(u,{path:"/student/test/:id",component:pe}),Object(p.jsx)(c.b,{path:"/",component:ae}),Object(p.jsx)(c.b,{path:"*",children:Object(p.jsx)("h1",{children:"Not Found"})})]})})}}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var kt=a(487),Tt=a(104);var Nt=Object(Tt.a)({palette:{primary:{main:"#000000"},secondary:{main:"#3e4f60"}}});s.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsxs)(kt.a,{theme:Nt,children:[Object(p.jsx)(q.a,{}),Object(p.jsx)(Ct,{}),Object(p.jsx)(W.b,{className:"impct-toast",position:"bottom-right",autoClose:3e3,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnVisibilityChange:!0,draggable:!1,pauseOnHover:!0,transition:W.a})]})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((e=>{e.unregister()})).catch((e=>{console.error(e.message)}))}},[[450,1,2]]]);
//# sourceMappingURL=main.1115d636.chunk.js.map